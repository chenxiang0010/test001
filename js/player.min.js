!function(window){function Player($audio){return new Player.prototype.init($audio)}Player.prototype={constructor:Player,musicList:[],init:function($audio){this.$audio=$audio,this.audio=$audio.get(0)},currentIndex:-1,playMusic:function(index,music){this.currentIndex==index?this.audio.paused?this.audio.play():this.audio.pause():(this.$audio.attr("src",music.link_url),this.audio.play(),this.currentIndex=index)},preIndex:function(){let index=this.currentIndex-1;return index<0&&(index=this.musicList.length-1),index},nextIndex:function(){let index=this.currentIndex+1;return index>this.musicList.length-1&&(index=0),index},changeMusic:function(index){this.musicList.splice(index,1),index<this.currentIndex&&(this.currentIndex=this.currentIndex-1)},musicTimeUpdate:function(callBack){let $this=this;this.$audio.on("timeupdate",(function(){let duration=$this.audio.duration,currentTime=$this.audio.currentTime,timeStr=$this.formatDate(currentTime,duration);callBack(currentTime,duration,timeStr)}))},formatDate:function(currentTime,duration){let endMin=parseInt(duration/60),endSec=parseInt(duration%60);endMin<10&&(endMin="0"+endMin),endSec<10&&(endSec="0"+endSec);let startMin=parseInt(currentTime/60),startSec=parseInt(currentTime%60);return startMin<10&&(startMin="0"+startMin),startSec<10&&(startSec="0"+startSec),startMin+":"+startSec+"/"+endMin+":"+endSec},musicSeekTo:function(value){isNaN(value)||(this.audio.currentTime=this.audio.duration*value)},musicVoiceSeekT0:function(value){isNaN(value)||value<0||value>1||(this.audio.volume=value)}},Player.prototype.init.prototype=Player.prototype,window.Player=Player}(window);