!function(window){function Lyric(path){return new Lyric.prototype.init(path)}Lyric.prototype={constructor:Lyric,init:function(path){this.path=path},times:[],lyrics:[],index:-1,loadLyric:function(callBack){let $this=this;$.ajax({url:$this.path,dataType:"text",success:function(data){$this.parseLyric(data),callBack()},error:function(e){console.log(e)}})},parseLyric:function(data){let $this=this;$this.times=[],$this.lyrics=[];let array=data.split("\n"),timeReg=/\[(\d*:\d*\.\d*)\]/;$.each(array,(function(index,ele){let lrc=ele.split("]")[1];if(1==lrc.length)return!0;$this.lyrics.push(lrc);let res=timeReg.exec(ele);if(null==res)return!0;let timeStr,res2=res[1].split(":"),min=60*parseInt(res2[0]),sec=parseFloat(res2[1]),time=parseFloat(Number(min+sec).toFixed(2));$this.times.push(time)}))},currentIndex:function(currentTime){return currentTime>=this.times[0]&&(this.index++,this.times.shift()),this.index}},Lyric.prototype.init.prototype=Lyric.prototype,window.Lyric=Lyric}(window);